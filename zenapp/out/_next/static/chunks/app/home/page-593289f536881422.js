(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{9766:function(e,t,s){Promise.resolve().then(s.bind(s,1272))},7831:function(e,t,s){"use strict";var a=s(7437),n=s(6648);t.Z=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex w-full bg-[#F7F4FE] h-[84px]  ",children:[(0,a.jsxs)("div",{className:"w-1/5 flex bg-white items-center pl-[37px] p-4",children:[(0,a.jsx)(n.default,{width:44,height:38,src:"./logo.svg",className:"fluid w-[44px] h-[38px]",alt:"Logo"}),(0,a.jsx)("p",{className:"text-primary600 text-2xl font-bold",children:"AMS"})]}),(0,a.jsxs)("div",{className:"w-4/5 flex justify-between items-center bg-white ml-1 pl-[37px]",children:[(0,a.jsxs)("div",{className:"relative w-[402px] h-[42px]",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search",className:"border rounded-[49px] h-full w-full pl-[40px] pr-[10px] bg-[#F7F4FE] focus:outline-none"}),(0,a.jsx)(n.default,{width:18,height:18,src:"./search.svg",alt:"Search",className:"absolute left-[12px] top-1/2 transform -translate-y-1/2 w-[18px] h-[18px]"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center px-[20px]",children:[(0,a.jsx)(n.default,{width:18,height:20,src:"./notification.svg",alt:"Notifications",className:"mr-[20px] w-[18px] h-[20px]"}),(0,a.jsx)(n.default,{width:40,height:40,src:"./user.png",alt:"User",className:"mr-[20px] w-[40px] h-[40px]"}),(0,a.jsxs)("div",{className:"grid",children:[(0,a.jsx)("p",{children:"Student"}),(0,a.jsx)("p",{children:"student@domain.ae"})]})]})]})]})})},4167:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(7437),n=s(2265),l=s(6648),c=e=>{let{icon:t,name:s,index:c,selected:r,onClick:i}=e;var[o,x]=(0,n.useState)(1);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("button",{onClick:i,className:"w-full items-center justify-start flex  py-[14px] px-[12px]   mt-4 rounded-[8px] ".concat(r?"bg-primary600  text-white":"text-black bg-white"),children:[(0,a.jsx)(l.default,{src:t,width:18,height:18,className:"fluid  w-[18px] h-[18px]   ".concat(r?"Image-white":"Image-black"),alt:""}),(0,a.jsx)("p",{className:"ml-2",children:s})]},c)})},r=s(6463);let i=[{icon:"./dashboard.svg",name:"home"}];var o=e=>{let{selectedItem:t,onSelectItem:s}=e,n=(0,r.useRouter)(),o=e=>{switch(s(e),e){case 0:n.push("/home");break;case 1:n.push("/users");break;case 2:n.push("/attendance");break;default:n.push("/dashboard")}};return(0,a.jsxs)("div",{className:"w-1/5 bg-white pt-[23px] p-[25px] flex flex-col",children:[i.map((e,s)=>(0,a.jsx)(c,{index:s,icon:e.icon,name:e.name,selected:t===s,onClick:()=>o(s)},s)),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),n.push("/login")},className:"w-full items-center justify-start flex py-[14px] px-[12px] mt-auto rounded-[8px] bg-primary600 text-white",children:[(0,a.jsx)(l.default,{src:"./logout.svg",width:18,height:18,className:"fluid w-[18px] h-[18px] Image-white",alt:"Logout"}),(0,a.jsx)("p",{className:"ml-2",children:"Logout"})]})]})}},1688:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437),n=s(6463),l=s(2265);let c=()=>!!localStorage.getItem("token");var r=e=>function(){let[t,s]=(0,l.useState)(!0),[r,i]=(0,l.useState)(!1),o=(0,n.useRouter)();return((0,l.useEffect)(()=>{c()?(i(!0),s(!1)):o.push("/login")},[o]),t)?(0,a.jsx)(a.Fragment,{}):r?(0,a.jsx)(e,{}):null}},2083:function(e,t,s){"use strict";s.d(t,{AttendanceProvider:function(){return r},a:function(){return i}});var a=s(7437),n=s(2265),l=s(6941);let c=(0,n.createContext)(void 0),r=e=>{let{children:t}=e,[s,r]=(0,n.useState)([]),i=(0,n.useCallback)(async()=>{try{let e=new l.Y,t=await e.get("attendance/clockin/",{});r(t.msg.results.results)}catch(e){console.error("Failed to fetch attendance",e)}},[]);return(0,a.jsx)(c.Provider,{value:{attendance:s,setAttendance:r,fetchAttendance:i},children:t})},i=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useUserContext must be used within a UserProvider");return e}},1272:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(7437),n=s(1688),l=s(4167),c=s(2083),r=s(6941),i=s(2265);function o(e){if(!e)return"";let t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]}let x=(e,t)=>e?parseFloat((Math.abs(new Date(e)-new Date(t))/36e5).toFixed(2)):null,d=e=>parseFloat(parseFloat(e).toFixed(2)),u=e=>parseFloat(parseFloat(e).toFixed(6)),h=new Date().toISOString();var p=e=>{let{message:t,onClose:s,onCancel:n}=e;return(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[16px] ",children:[(0,a.jsx)("p",{className:"font-bold",children:t}),(0,a.jsxs)("div",{className:"flex justify-between gap-3",children:[(0,a.jsx)("button",{onClick:s,className:"mt-4 w-[215px] bg-[#F2F4F7] text-black font-semibold rounded-[11px] py-2 px-4 rounded",children:"Cancel"}),(0,a.jsx)("button",{onClick:n,className:"mt-4 w-[215px] bg-primary600 text-white py-2 px-4 rounded-[11px]",children:"Close"})]})]})})},m=s(6648),f=()=>{let[e,t]=(0,i.useState)(null),[s,n]=(0,i.useState)(new Date),{attendance:l,setAttendance:o,fetchAttendance:x}=(0,c.a)(),[d,f]=(0,i.useState)(!1),[w,g]=(0,i.useState)(!1),[j,b]=(0,i.useState)(!1),N=async()=>{g(!1),b(!0);let e=l.find(e=>""===e.check_out||null===e.check_out),t=e?e.id:null;try{let e=new r.Y;(await e.patch("attendance/clockin/".concat(t,"/"),{check_out:h})).status&&(k(),x())}catch(e){}b(!1)},v=async(e,t)=>{b(!0);try{let s=new r.Y,a=await s.post("attendance/clockin/",{lat:"".concat(e),long:"".concat(t)});if(a.status){y();let e=a.msg;o([...l,e])}}catch(e){console.error("Failed to add attendance",e)}b(!1)},y=()=>{t(new Date)},k=()=>{t(null),n(new Date)};(0,i.useEffect)(()=>{f(l.some(e=>!e.check_out));let e=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(e)},[l]);let{hours:S,minutes:F,seconds:C}=((e,t)=>{if(!e)return{hours:0,minutes:0,seconds:0};let s=t.getTime()-e.getTime();if(s<0)return{hours:0,minutes:0,seconds:0};let a=Math.floor(s/1e3);return{hours:Math.floor(a/3600),minutes:Math.floor(a%3600/60),seconds:a%60}})(e,s);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,a.jsxs)("div",{className:"flex flex-col rounded-[24px] bg-white w-[800px] h-[370px] p-[30px]",children:[(0,a.jsxs)("div",{className:"mb-[30px] flex justify-between text-xl",children:[(0,a.jsx)("p",{className:"font-semibold",children:s.toDateString()}),(0,a.jsx)("p",{className:"font-semibold",children:s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"flex justify-center",children:[(0,a.jsxs)("div",{className:"rounded-[13px] mr-3 flex flex-col justify-center items-center bg-bgColor h-[93px] w-[93px]",children:[(0,a.jsx)("p",{className:"font-bold text-[30px]",children:S.toString().padStart(2,"0")}),(0,a.jsx)("p",{className:"text-[14px]",children:"HOURS"})]}),(0,a.jsxs)("div",{className:"rounded-[13px] mr-3 flex flex-col justify-center items-center bg-bgColor h-[93px] w-[93px]",children:[(0,a.jsx)("p",{className:"font-bold text-[30px]",children:F.toString().padStart(2,"0")}),(0,a.jsx)("p",{className:"text-[14px]",children:"MINUTES"})]}),(0,a.jsxs)("div",{className:"rounded-[13px] mr-3 flex flex-col justify-center items-center bg-bgColor h-[93px] w-[93px]",children:[(0,a.jsx)("p",{className:"font-bold text-[30px]",children:C.toString().padStart(2,"0")}),(0,a.jsx)("p",{className:"text-[14px]",children:"SECONDS"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center mt-[20px]",children:[(0,a.jsx)("p",{className:"text-[18px] text-[#98A2B3]",children:"General 10:00 AM to 06:00 PM"}),(0,a.jsxs)("button",{className:"w-full items-center ".concat(d?"bg-[#D92D20]":"bg-[#12B76A]"," max-w-[390px] justify-center flex py-[14px] px-[12px] mt-4 rounded-[13px] text-white"),onClick:d?()=>{g(!0)}:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{let t="".concat(e.coords.latitude),s="".concat(e.coords.longitude),a=u(t),n=u(s);await v(a,n)},e=>{console.error("Error obtaining location",e)}):console.error("Geolocation is not supported by this browser.")},children:[(0,a.jsx)(m.default,{src:"./checkIn.svg",width:18,height:18,className:"fluid w-[18px] h-[18px] Image-white",alt:"Logout"}),(0,a.jsxs)("p",{className:"ml-2",children:[j?"Loading..":"".concat(d?"Check Out":"Check In")," "]})]}),(0,a.jsxs)("div",{className:"flex mt-6",children:[(0,a.jsx)("p",{className:"text-[16px] mr-4 font-semibold",children:"View full day tracking"}),(0,a.jsx)(m.default,{src:"./down_arrow.svg",width:18,height:18,className:"fluid w-[18px] h-[18px] Image-black",alt:"Logout"})]})]})]})}),w&&(0,a.jsx)(p,{message:"Are you sure want to Check out?",onClose:()=>g(!1),onCancel:N})]})},w=s(7831),g=()=>{let{attendance:e,fetchAttendance:t}=(0,c.a)(),[s,n]=(0,i.useState)(!1),[l,r]=(0,i.useState)(null);return(0,i.useEffect)(()=>{0===e.length&&(n(!0),t().finally(()=>n(!1)))},[e,t]),(0,a.jsxs)("div",{className:"w-full grid rounded-[14px] bg-white mt-[20px]",children:[(0,a.jsx)("p",{className:"font-semibold ml-[10px] py-[14px]  text-[20px] ",children:"Attendance List"}),(0,a.jsxs)("div",{className:"bg-primary600 w-full px-[10px] h-[62px] items-center text-white py-[8px] flex justify-between ",children:[(0,a.jsx)("p",{className:"font-bold text-left flex-1 min-w-[150px]",children:"Date"}),(0,a.jsx)("p",{className:"font-bold text-left flex-1 min-w-[120px]",children:"Longitude"}),(0,a.jsx)("p",{className:"font-bold text-left flex-1 min-w-[120px]",children:"Latitude"}),(0,a.jsx)("p",{className:"font-bold text-left flex-1 min-w-[150px]",children:"Check-In"}),(0,a.jsx)("p",{className:"font-bold text-left flex-1 min-w-[150px]",children:"Check-Out"}),(0,a.jsx)("p",{className:"font-bold text-left flex-1 min-w-[150px]",children:"Total Hours"}),(0,a.jsx)("p",{className:"font-bold text-left flex-1 min-w-[150px]",children:"Status"})]}),(0,a.jsx)("div",{className:"bg-white w-full",children:e.map((e,t)=>(0,a.jsxs)("div",{className:"w-full px-[10px] py-[8px] min-h-[50px] items-center flex justify-between border-b border-gray-100",children:[(0,a.jsx)("p",{className:"text-left flex-1 min-w-[150px] ",children:o(e.created_at)}),(0,a.jsx)("p",{className:"text-left flex-1 min-w-[120px]",children:d(e.long)}),(0,a.jsx)("p",{className:"text-left flex-1 min-w-[120px]",children:d(e.lat)}),(0,a.jsx)("p",{className:"text-left flex-1 min-w-[150px]",children:o(e.check_in)}),(0,a.jsx)("p",{className:"text-left flex-1 min-w-[150px]",children:o(e.check_out)}),(0,a.jsx)("p",{className:"text-left flex-1 min-w-[150px]",children:x(e.check_out,e.check_in)}),(0,a.jsx)("div",{className:" text-left bg-green flex-1 min-w-[150px]",children:"Present"})]},t))})]})},j=(0,n.Z)(()=>{let[e,t]=(0,i.useState)(0);return(0,a.jsxs)("div",{className:"flex flex-col bg-[#F7F4FE] w-screen h-screen",children:[(0,a.jsx)(w.Z,{}),(0,a.jsxs)("div",{className:"flex flex-grow w-full bg-[#F7F4FE] mt-1",children:[(0,a.jsx)(l.Z,{selectedItem:e,onSelectItem:t}),(0,a.jsxs)("div",{className:"w-4/5 flex flex-col ml-1 pt-[23px] px-[35px]",children:[(0,a.jsx)(f,{}),(0,a.jsx)(g,{})]})]})]})})},6941:function(e,t,s){"use strict";s.d(t,{Y:function(){return i}});var a=s(8472);function n(e,t){console.error(" \n    Base URL: ".concat(t,"\n    variables:$variables\n    Encoded Variables : ").concat(JSON.stringify(e),"\n    Error:").concat(t,"\n    Error Message : ").concat(t.message,"\n    "))}function l(e,t){console.log("\n    Base Url:".concat(t.headers,"\n    Variables: ").concat(e,"\n    Encoded Variables: ").concat(JSON.stringify(e),"\n    status: ").concat(t.status,"\n    Data:").concat(t.data,"\n    "))}class c{toString(){return"Status: ".concat(this.status,",Msg:").concat(this.msg)}constructor(e,t){this.status=e,this.msg=t}}class r{async get(e,t){try{let s=this.axios({method:"get",url:"".concat(r.base_url).concat(e),data:t}),a=await s;return l(t,s),new c(!0,a.data)}catch(e){return n(t,e),new c(!1,e)}}async post(e,t){try{let s=this.axios({method:"post",url:"".concat(r.base_url).concat(e),data:t}),a=await s;return l(t,s),new c(!0,a.data)}catch(e){return n(t,e),new c(!1,e)}}async put(e,t){try{let s=this.axios({method:"put",url:"".concat(r.base_url).concat(e),data:t}),a=await s;return l(t,s),new c(!0,a.data)}catch(e){return n(t,e),new c(!1,e)}}async patch(e,t){try{let s=this.axios({method:"patch",url:"".concat(r.base_url).concat(e),data:t}),a=await s;return l(t,s),new c(!0,a.data)}catch(e){return n(t,e),new c(!1,e)}}async delete(e,t){try{let s=this.axios({method:"delete",url:"".concat(e),data:t}),a=await s;return l(t,s),new c(!0,a.data)}catch(e){return n(t,e),new c(!1,e)}}constructor(e){this.axios=e,this.axios.interceptors.request.use(async e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e))}}r.base_url="https://api.hamrokk.com/";class i extends r{constructor(){if(super(a.Z.create({timeout:1e4})),i.instance)return i.instance;i.instance=this}}}},function(e){e.O(0,[472,595,971,23,744],function(){return e(e.s=9766)}),_N_E=e.O()}]);